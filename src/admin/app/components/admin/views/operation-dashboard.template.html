<div class="row scrollable-content">

    <div class="container-fluid scrollable-content">

        <div class="col-xs-12 col-sm-12 col-md-8 col-lg-8 scrollable-content" ng-controller="AdminTrackingController as atController">
            <dmec-tracking current-operation="operationData.operationContext.currentOperation" current-event="operationData.eventContext.currentEvent"
                current-tick="operationData.chronometerContext.tick" current-block-position="operationData.readingContext.currentReading.blockPosition"
                current-reading="operationData.readingContext.currentReading" connection-events="dados.connectionEvents" trip-events="dados.tripEvents"
                time-events="dados.timeEvents">
            </dmec-tracking>
        </div>

        <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4 scrollable-content">

            <!-- Well Information -->
            <well-information-panel
                ng-init="odController.getPanelStartState('panelWellIsCollapsed')" 
                ng-click="odController.changePanelState('panelWellIsCollapsed')"
                collapse = "statusPanel['panelWellIsCollapsed']"
                well="operationData.wellContext.currentWell">
            </well-information-panel>

            <!-- Operation Information -->
            <operation-information-panel
                ng-init="odController.getPanelStartState('panelOperationInfoIsCollapsed')" 
                ng-click="odController.changePanelState('panelOperationInfoIsCollapsed')" 
                collapse = "statusPanel['panelOperationInfoIsCollapsed']"
                number-joints="operationData.jointContext.numberJoints"
                joint-number="operationData.jointContext.currentJoint.jointNumber" 
                operation="operationData.operationContext.currentOperation"
                state="operationData.stateContext.currentState" 
                reading="operationData.readingContext.currentReading"
                acc-score="scoreData.accScore"
                target-param-expected-end-time="expectations.stateExpectedEndTime" 
                target-expected-duration="expectations.stateExpectedDuration"
                poor-expected-duration="expectations.vPoorStateExpectedDuration"
                well="operationData.wellContext.currentWell">
            </operation-information-panel>

            <!-- Consistency Information -->
            <consistency-information-panel
                ng-init="odController.getPanelStartState('panelConsistencyInfoIsCollapsed')" 
                ng-click="odController.changePanelState('panelConsistencyInfoIsCollapsed')" 
                collapse = "statusPanel['panelConsistencyInfoIsCollapsed']"
                state="operationData.stateContext.currentState" 
                event="operationData.eventContext.currentEvent"
                is-tripin="operationData.directionContext.tripin" 
                score="operationData.scoreContext.currentScore"
                joint-info="jointInfo"
                last-two-events="lastTwoEvents">
            </consistency-information-panel>

            <!-- Next Activities Information -->
            <next-activities-information-panel
                ng-init="odController.getPanelStartState('panelNextActivityIsCollapsed')" 
                ng-click="odController.changePanelState('panelNextActivityIsCollapsed')" 
                collapse = "statusPanel['panelNextActivityIsCollapsed']"
                activities="expectations.nextActivities">
            </next-activities-information-panel>

            <operation-progress-panel 
                current-score="operationData.scoreContext.currentScore" 
                progress-data="operationData.operationProgressContext.operationProgressData[operationData.stateContext.currentState]">
            </operation-progress-panel>

            <div class="panel panel-default">

                <div class="panel-heading clearfix" ng-init="odController.getPanelStartState('panelOperationIsCollapsed')" ng-click="odController.changePanelState('panelOperationIsCollapsed')">
                    <h4 class="panel-title pull-left">
                        Trip {{ operationData.directionContext.tripin?'In': 'Out' }} Sub Operation Forecast</h4>
                    <div class="btn-group pull-right">
                        <i type="button" class="pull-right glyphicon pointer" ng-class="{'glyphicon-chevron-down': statusPanel['panelOperationIsCollapsed'], 'glyphicon-chevron-up': !statusPanel['panelOperationIsCollapsed']}">
                        </i>
                    </div>
                </div>

                <div class="panel-body" uib-collapse="statusPanel['panelOperationIsCollapsed']">

                    <button class="btn btn-default" ng-click="odController.actionButtonBuildForecast( 'vOptimumLine', 'BOTH' )">
                        Optimum
                    </button>

                    <button class="btn btn-default" ng-click="odController.actionButtonBuildForecast( 'vStandardLine', 'BOTH' )">
                        Standard
                    </button>

                    <button class="btn btn-default" ng-click="odController.actionButtonBuildForecast( 'vPoorLine', 'BOTH' )">
                        Poor
                    </button>

                    <forecast-waterfall horizontal="false" data-data-chart="forecast">
                    </forecast-waterfall>

                </div>

            </div>

            <div class="panel panel-default">

                <div class="panel-heading clearfix" ng-init="odController.getPanelStartState('panelCurrentAlarmIsCollapsed')" ng-click="odController.changePanelState('panelCurrentAlarmIsCollapsed')">
                    <h4 class="panel-title pull-left">Current Alarm</h4>
                    <div class="btn-group pull-right">
                        <i type="button" class="pull-right glyphicon pointer" ng-class="{'glyphicon-chevron-down': statusPanel['panelCurrentAlarmIsCollapsed'], 'glyphicon-chevron-up': !statusPanel['panelCurrentAlarmIsCollapsed']}">
                        </i>
                    </div>
                </div>

                <div class="panel-body" uib-collapse="statusPanel['panelCurrentAlarmIsCollapsed']">

                    <div ng-if="operationData.alarmContext.currentAlarm">
                        <table class="table table-sm table-hover table-condensed">
                            <thead>
                                <tr>
                                    <th>{{operationData.alarmContext.currentAlarm.name}}</th>
                                </tr>
                                <tr>
                                    <th>Start</th>
                                    <th>End</th>
                                    <th ng-if="operationData.alarmContext.currentAlarm.isDurationAlarm">Duration</th>
                                    <th ng-if="!operationData.alarmContext.currentAlarm.isDurationAlarm">Restriction</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>{{operationData.alarmContext.currentAlarm.startDepth | number: 2}}(m)</td>
                                    <td>{{operationData.alarmContext.currentAlarm.endDepth | number: 2}}(m)</td>
                                    <td ng-if="operationData.alarmContext.currentAlarm.isDurationAlarm">{{ 3600/operationData.alarmContext.currentAlarm.optimumSpeed | secondsToHourMinutesSeconds}}</td>
                                    <td ng-if="!operationData.alarmContext.currentAlarm.isDurationAlarm">{{operationData.alarmContext.currentAlarm.speedRestriction | number: 2}}(m/s)</td>
                                </tr>
                                <tr>
                                    <td colspan="3">{{operationData.alarmContext.currentAlarm.message}}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div ng-if="!operationData.alarmContext.currentAlarm">
                        No Current Alarm
                    </div>

                </div>

            </div>

            <upcoming-alarms-panel tripin-alarms="operationData.alarmContext.tripin" tripout-alarms="operationData.alarmContext.tripout"
                current-direction="operationData.directionContext" current-bit-depth="operationData.bitDepthContext.bitDepth">
            </upcoming-alarms-panel>

            <div class="panel panel-default">

                <div class="panel-heading clearfix" ng-init="odController.getPanelStartState('panelFailuresIsCollapsed')" ng-click="odController.changePanelState('panelFailuresIsCollapsed')">
                    <h4 class="panel-title pull-left">Failures</h4>
                    <div class="btn-group pull-right">
                        <i type="button" class="pull-right glyphicon pointer" ng-class="{'glyphicon-chevron-down': statusPanel['panelFailuresIsCollapsed'], 'glyphicon-chevron-up': !statusPanel['panelFailuresIsCollapsed']}">
                        </i>
                    </div>
                </div>

                <div class="panel-body" uib-collapse="statusPanel['panelFailuresIsCollapsed']">

                    <div ng-if="operationData.failureContext.failureList.length != 0">

                        <table class="table table-sm table-hover table-condensed">
                            <thead>
                                <tr>
                                    <th>NPT</th>
                                    <th>Category</th>
                                    <th>Start</th>
                                    <th>End</th>
                                    <th>Total</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-repeat="(key, failure) in operationData.failureContext.failureList" ng-class="{'danger':failure.npt, 'warning':failure.onGoing}">
                                    <td>
                                        <span ng-class="{'glyphicon glyphicon-ok':(failure.npt), '':(!failure.npt)}"></span>
                                    </td>
                                    <td>{{failure.category.name}}</td>
                                    <td>{{failure.startTime | date:'MM/dd/yyyy HH:mm:ss'}}</td>
                                    <td>{{failure.endTime | date:'MM/dd/yyyy HH:mm:ss'}}</td>
                                    <td>{{odController.getTotalFailureTime(failure.startTime, failure.endTime) / 1000 | secondsToHourMinutesSeconds}}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                </div>

            </div>

        </div>

    </div>

    <!-- <pre ng-repeat="(key, value) in operationData.forecastContext">{{ key }}</pre> -->
    <!-- <pre>{{ operationData.forecastContext.actualLine | json }}</pre> -->
    <!-- <pre >{{ operationData.suboperationContext.currentSuboperation.tripin | json }}</pre> -->

</div>